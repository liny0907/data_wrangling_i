---
title: "Tidy Data"
author: Lin Yang
date: 2021-09-28
output: github_document
 

---

```{r}
library(tidyverse)
library(readxl)
library(haven)
```

## pivot longer

Load the pulse data.

```{r}
pulse_df = 
  haven::read_sas("./data/public_pulse_data.sas7bdat") %>%
  janitor::clean_names()
```

Let's try to pivot

```{r}
pulse_tidy = 
  pulse_df %>% 
  pivot_longer(
    bdi_score_bl:bdi_score_12m,
    names_to = "visit",
    names_prefix = "bdi_score_",
    values_to = "bdi") %>% 
  mutate(
    visit = replace(visit, visit == "bl", "00m"),
    visit = factor(visit)) 

pulse_tidy

```





